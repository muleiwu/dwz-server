# HTTP 配置
http:
  mode: release  # debug, release, test
  addr: ":8080"
  # 静态资源根目录，会自动加载该目录下的所有文件和子目录
  # 访问 /admin/ 时会尝试返回 /admin/index.html 或 /admin/index.htm
  static_dir: static
  # 静态文件模式: embed（嵌入到二进制）或 disk（从磁盘加载）
  static_mode: embed
  # 模板文件模式: embed（嵌入到二进制）或 disk（从磁盘加载）
  templates_mode: embed
  # 模板文件目录
  templates_dir: templates

# 静态资源缓存策略（仅对 static_mode: disk 生效）：
# - mode: release → 启用内存缓存，首次读取后缓存到内存，性能最优
# - mode: debug/test → 实时读取磁盘，支持热更新，无需重启服务器

# 开发环境配置示例（支持热更新）：
# http:
#   mode: debug              # 非 release 模式，实时读取磁盘
#   addr: ":8080"
#   static_dir: static
#   static_mode: disk        # 从磁盘加载
#   templates_mode: disk     # 从磁盘加载
#   templates_dir: templates
#
# 生产环境配置示例（性能优化）：
# http:
#   mode: release            # release 模式，启用缓存
#   addr: ":8080"
#   static_dir: static
#   static_mode: disk        # 从磁盘加载（带缓存）
#   templates_mode: embed    # 嵌入到二进制
#   templates_dir: templates
#
# 或使用完全嵌入模式（推荐生产环境）：
# http:
#   mode: release
#   addr: ":8080"
#   static_dir: static
#   static_mode: embed       # 嵌入到二进制
#   templates_mode: embed    # 嵌入到二进制
#   templates_dir: templates

# 数据库配置
database:
  # 数据库类型: mysql, postgresql, sqlite
  driver: mysql
  
  # MySQL/PostgreSQL 配置
  host: localhost
  port: 3306
  username: root
  password: password
  dbname: dwz_db
  
  # SQLite 配置（当 driver 为 sqlite 时使用）
  filepath: "./config/sqlite.db"

# 支持的环境变量：
# DATABASE_DRIVER=mysql|postgresql|sqlite
# DATABASE_HOST=localhost
# DATABASE_PORT=3306
# DATABASE_NAME=dwz_db  
# DATABASE_USERNAME=root
# DATABASE_PASSWORD=password
# DATABASE_FILEPATH=./config/sqlite.db

# 数据库配置示例：
# 
# MySQL:
#   driver: mysql
#   host: localhost
#   port: 3306
#   username: root
#   password: password
#   dbname: dwz_db
#
# PostgreSQL:
#   driver: postgresql
#   host: localhost
#   port: 5432
#   username: postgres
#   password: password
#   dbname: dwz_db
#
# SQLite:
#   driver: sqlite
#   filepath: "./config/sqlite.db"

# Redis 配置
redis:
  host: localhost
  port: 6379
  password: ""
  db: 0
  pool_size: 10
  min_idle_conns: 5

# 日志配置
log:
  level: info    # debug, info, warn, error
  filename: logs/app.log
  max_size: 100     # MB
  max_age: 30       # days
  max_backups: 10
  compress: true

# JWT 配置
jwt:
  secret: your-secret-key
  expire_hours: 24

# 短链接配置
shortlink:
  domain: "http://localhost:8080"
  length: 6
  custom_length: true

# 限流配置
rate_limit:
  requests_per_minute: 100
  burst: 10

# CORS 配置
cors:
  allow_origins:
    - "*"
  allow_methods:
    - "GET"
    - "POST"
    - "PUT"
    - "DELETE"
    - "OPTIONS"
  allow_headers:
    - "Origin"
    - "Content-Type"
    - "Authorization"

# 缓存配置
cache:
  driver: redis  # memory、redis、none

# ID生成器配置
id_generator:
  driver: redis  # memory、redis、none